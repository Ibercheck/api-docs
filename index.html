
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="canonical" href="https://www.ibercheck.com/docs/api/">

    <title>Ibercheck API</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nn {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nl {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ni {
  color: #ffffff;
  background-color: #272822;
}
.highlight .bp {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vg {
  color: #ffffff;
  background-color: #272822;
}
.highlight .vi {
  color: #ffffff;
  background-color: #272822;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
  background-color: #272822;
}
.highlight .w {
  color: #ffffff;
  background-color: #272822;
}
.highlight {
  color: #ffffff;
  background-color: #272822;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
  background-color: #272822;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen-5292c9c5.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print-bccf8c07.css" rel="stylesheet" media="print" />
      <script src="javascripts/all-c5541673.js"></script>
  </head>

  <body class="index" data-languages="[&quot;http&quot;,&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <p class="logo">
        <a href="https://www.ibercheck.com" class="logo-link">
          IBERCHECK
        </a>
      </p>
        <div class="lang-selector">
              <a href="#" data-language-name="http">http</a>
              <a href="#" data-language-name="shell">shell</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#making-requests" class="toc-h2 toc-link" data-title="Making Requests">Making Requests</a>
                  </li>
                  <li>
                    <a href="#errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                  </li>
                  <li>
                    <a href="#versioning" class="toc-h2 toc-link" data-title="Versioning">Versioning</a>
                  </li>
                  <li>
                    <a href="#hypermedia" class="toc-h2 toc-link" data-title="Hypermedia">Hypermedia</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tutorial" class="toc-h1 toc-link" data-title="Tutorial">Tutorial</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
                  <li>
                    <a href="#register-a-new-user" class="toc-h2 toc-link" data-title="Register a new user">Register a new user</a>
                  </li>
                  <li>
                    <a href="#register-a-new-sale" class="toc-h2 toc-link" data-title="Register a new sale">Register a new sale</a>
                  </li>
                  <li>
                    <a href="#register-a-new-report-request" class="toc-h2 toc-link" data-title="Register a new report request">Register a new report request</a>
                  </li>
                  <li>
                    <a href="#upload-a-document-to-the-report-request" class="toc-h2 toc-link" data-title="Upload a document to the report request">Upload a document to the report request</a>
                  </li>
                  <li>
                    <a href="#complete-report-request-authentication" class="toc-h2 toc-link" data-title="Complete report request authentication">Complete report request authentication</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="WebHooks">WebHooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#report-request-status-changed-event" class="toc-h2 toc-link" data-title="Report request status changed event">Report request status changed event</a>
                  </li>
              </ul>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href="https://www.ibercheck.com/docs/api/playground/">API Playground</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1><div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer YOUR IBERCHECK ACCESS TOKEN</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api.ibercheck.com</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api.ibercheck.com/users"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"authorization: Bearer YOUR IBERCHECK ACCESS TOKEN"</span>
</code></pre></div><div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer YOUR IBERCHECK ACCESS TOKEN</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/users"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"authorization: Bearer YOUR IBERCHECK ACCESS TOKEN"</span>
</code></pre></div>
<p>Welcome to the Ibercheck API documentation. The Ibercheck API is organized around
<a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a> and
<a href="#hypermedia">Hypermedia</a>.
Our API is designed to have predictable, resource-oriented URLs and to use HTTP response codes to indicate API errors.
We use built-in HTTP features, like HTTP authentication and HTTP verbs, which can be understood by off-the-shelf HTTP
clients, and we support cross-origin resource sharing to allow you to interact securely with our API from a client-side
web application
(though you should remember that you should never expose your API credentials in any public website&#39;s client-side code).
JSON will be returned in all responses from the API, including errors.</p>

<p>The first thing you will have to find out is the correct API endpoint to use.</p>

<ul>
<li>For production environments, use <strong><a href="https://api.ibercheck.com">https://api.ibercheck.com</a></strong>.</li>
<li>For development/testing/staging environments, use <strong><a href="https://api_dev.ibercheck.net">https://api-dev.ibercheck.net</a></strong>.</li>
</ul>

<p>Note that all API calls to be <a href="#authentication">authenticated</a>.</p>
<h2 id='authentication'>Authentication</h2><h3 id='affiliate-authentication'>Affiliate authentication</h3>
<blockquote>
<p>For to retrieve the <code>access_token</code> use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/oauth</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR AFFILIATE NAME"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR AFFILIATE SECRET"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/oauth"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-X</span> POST <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"grant_type": "client_credentials","client_id": "YOUR AFFILIATE NAME","client_secret": "YOUR AFFILIATE SECRET"}'</span>
</code></pre></div>
<blockquote>
<p>Make sure to replace <code>YOUR AFFILIATE NAME</code> and <code>YOUR AFFILIATE SECRET</code> with your <code>affiliate name</code> and
 <code>affiliate secret</code> present in the welcome pack sent to you.</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="s2">"YOUR IBERCHECK ACCESS TOKEN"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="mi">3600</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="s2">"ROLE_AFFILIATE create:user read:email"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="s1">'{
  "access_token":"YOUR IBERCHECK ACCESS TOKEN",
  "expires_in":3600,
  "token_type":"bearer",
  "scope":"ROLE_AFFILIATE create:user read:email"
}'</span>
</code></pre></div>
<p>You authenticate to the Ibercheck API by exchanging your <em>Affiliate secret key</em> with an <em>OAuth2</em> <code>access_token</code>.
You can manage your <em>Affiliate secret key</em> from your account. Your <em>Affiliate secret key</em> carry many privileges,
so be sure to keep them secret!</p>

<p>All API requests must be made over HTTPS. Calls made over plain HTTP will fail. You must authenticate for all requests.</p>
<h3 id='user-authentication'>User authentication</h3>
<p>For to do operations related with an user (i.e. make a new report request, update profile) the affiliate must operate
on behalf the user.</p>

<p>The way of Ibercheck API allow to impersonate a given user is through an access_token present in the user resource when
the user is created or when is retrieved from the API.</p>
<h2 id='making-requests'>Making Requests</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer YOUR IBERCHECK ACCESS TOKEN</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/users"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"authorization: Bearer YOUR IBERCHECK ACCESS TOKEN"</span>
</code></pre></div>
<blockquote>
<p>Make sure to replace <code>YOUR IBERCHECK ACCESS TOKEN</code> with the <code>access_token</code> obtained in <a href="#authentication">Authentication</a>.</p>
</blockquote>

<aside class="warning">
  If you do not set the **Accept** header, you might retrieve old API formats.
</aside>

<p>When you write your own Travis CI client, please keep the following in mind:</p>

<ul>
<li>Always set the <strong>User-Agent</strong> header. This header is not required right now, but will be in the near future.
Assuming your client is called &quot;My Client&quot;, and it&#39;s current version is 1.0.0, a good value would be <code>MyClient/1.0.0</code>.</li>
<li>Always set the <strong>Accept</strong> header to <code>application/vnd.ibercheck.v1+json</code>.</li>
<li>You must replace <code>YOUR IBERCHECK ACCESS TOKEN</code> with the <code>access_token</code> obtained in <a href="#authentication">Authentication</a>. </li>
</ul>

<p>Any existing client library should take care of these for you.</p>
<h2 id='errors'>Errors</h2>
<blockquote>
<p>HTTP Status Code Summary</p>

<p><strong>200</strong> - OK - Success!</p>

<p><strong>201</strong> - OK - Resource created.</p>

<p><strong>400</strong> - Bad Request - The request was invalid or cannot be otherwise served.</p>

<p><strong>401</strong> - Unauthorized - Authentication credentials were missing or incorrect.</p>

<p><strong>403</strong> - Forbidden - There is no permission for access to the resource.</p>

<p><strong>404</strong> - Not Found - The requested item doesn&#39;t exist.</p>

<p><strong>409</strong> - Conflict - Another resource already exists for the given parameters.</p>

<p><strong>422</strong> - Failed validation - Some input parameter is invalid. See the <code>validation_messages</code> for details.</p>

<p><strong>500</strong> - Internal Server Error - Something went wrong on Ibercheck&#39;s end.</p>
</blockquote>

<p>Ibercheck uses conventional HTTP response codes to indicate success or failure of an API request.
In general, codes in the 2xx range indicate success, codes in the 4xx range indicate an error that resulted from the
provided information (e.g. a required parameter was missing, etc.), and codes in the 5xx range indicate an error with
Ibercheck&#39;s servers.
Not all errors map cleanly onto HTTP response codes, however. When a request is valid but does not complete successfully
(e.g. a required was parameter was missing), we return a 422 error code.</p>

<p>Error response body has the format defined by <a href="https://tools.ietf.org/html/rfc7807">RFC 7807</a>.</p>
<h3 id='attributes'>Attributes</h3><div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">422</span> <span class="ne">Unprocessable Entity</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/problem+json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"validation_messages"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"celular_phone"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"phoneNumberNoMatch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The input does not match a phone number format"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"national_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"DNI_NotValid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Número de DNI inválido"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"NIE_NotValid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Número de NIE inválido"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"This is not a valid email"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Unprocessable Entity"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">422</span><span class="p">,</span><span class="w">
  </span><span class="nl">"detail"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Failed Validation"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>detail</td>
<td>An human readable explanation specific to this occurrence of the problem.</td>
</tr>
<tr>
<td>status</td>
<td>The HTTP status code generated by the origin server for this occurrence of the problem.</td>
</tr>
<tr>
<td>title</td>
<td>A short, human-readable summary of the problem type.</td>
</tr>
<tr>
<td>type</td>
<td>An absolute URI that identifies the problem type.</td>
</tr>
<tr>
<td>validation_messages</td>
<td><em>Optional</em>. Input validation error detail.</td>
</tr>
</tbody></table>
<h2 id='versioning'>Versioning</h2>
<blockquote>
<p>v1 request</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/users"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span>
</code></pre></div>
<blockquote>
<p>v2 request</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">GET</span> <span class="nn">/users</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v2+json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/users"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v2+json"</span>
</code></pre></div>
<p>When we make backwards-incompatible changes to the API, we release new versions. The current version is <code>v1</code>.
Read our API upgrades guide to see our API changelog and to learn more about backwards compatibility.</p>

<p>API versions are released with changes in the negotiated media type.
So version 1 is <code>application/vnd.ibercheck.v1+json</code> and version 2 will be <code>application/vnd.ibercheck.v2+json</code></p>
<h2 id='hypermedia'>Hypermedia</h2>
<p>The Ibercheck API is organized around
<a href="http://en.wikipedia.org/wiki/Representational_State_Transfer">REST</a> and
<a href="http://en.wikipedia.org/wiki/HATEOAS">HATEOAS</a>. Almost every resource representation will contain a <code>_links</code> section
with links to operations with the resource itself.</p>

<p>Ibercheck API follows the <a href="https://tools.ietf.org/html/draft-kelly-json-hal-06">Hypertext Application Language</a> model
for hypermedia representation.</p>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/user"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"total_items"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="nl">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/user/1"</span><span class="w">
          </span><span class="p">},</span><span class="w">
          </span><span class="nl">"sale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/user/1/sale"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"surnames"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">   
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_links</td>
<td>Collection of links related and available to the resource itself.</td>
</tr>
<tr>
<td>_embedded</td>
<td>Collection of related resources &quot;embedded&quot; in the same response.</td>
</tr>
</tbody></table>

<aside class="warning">
  Always use the `links` provided for navigate across the API. Never try to guess the URI.
</aside>

<p>The link collection is dynamically generated for each resource state. So you may expect to disappear links and appear
new ones adapted for the resource state (i.e. a payment action will disappear from a Sale already pay)</p>
<h1 id='tutorial'>Tutorial</h1>
<p>Reports are asynchronous transactions. This means it&#39;s necessary to register a request. After registering your
request you will be posted about the progress via WebHooks.</p>
<h2 id='authentication'>Authentication</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/oauth</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"grant_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"client_credentials"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"client_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR AFFILIATE NAME"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"client_secret"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR AFFILIATE SECRET"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/oauth"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-X</span> POST <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"grant_type": "client_credentials","client_id": "YOUR AFFILIATE NAME","client_secret": "YOUR AFFILIATE SECRET"}'</span>
</code></pre></div>
<blockquote>
<p>Make sure to replace <code>YOUR AFFILIATE NAME</code> and <code>YOUR AFFILIATE SECRET</code> with your <code>affiliate name</code> and
 <code>affiliate secret</code> present in the welcome pack sent to you.</p>
</blockquote>

<p>Exchange your <em>Affiliate secret key</em> with an <em>OAuth2</em> <code>access_token</code>.</p>
<h3 id='request'>Request</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>grant_type</td>
<td><code>OAuth2</code> grant type. Always <code>client_credentials</code>.</td>
</tr>
<tr>
<td>client_id</td>
<td>Your <code>affiliate name</code></td>
</tr>
<tr>
<td>client_secret</td>
<td>Your <code>affiliate secret key</code></td>
</tr>
<tr>
<td>scope</td>
<td><em>Optional</em> OAuth2 scopes by default <code>ROLE_AFFILIATE create:user read:email</code></td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"access_token"</span><span class="p">:</span><span class="s2">"YOUR IBERCHECK ACCESS TOKEN"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expires_in"</span><span class="p">:</span><span class="mi">3600</span><span class="p">,</span><span class="w">
  </span><span class="nl">"token_type"</span><span class="p">:</span><span class="s2">"bearer"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"scope"</span><span class="p">:</span><span class="s2">"ROLE_AFFILIATE create:user read:email"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="s1">'{
  "access_token":"YOUR IBERCHECK ACCESS TOKEN",
  "expires_in":3600,
  "token_type":"bearer",
  "scope":"ROLE_AFFILIATE create:user read:email"
}'</span>
</code></pre></div><h3 id='response'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td><em>OAuth2</em> <code>access_token</code>. This value must be present in every authenticated API call.</td>
</tr>
<tr>
<td>expires_in</td>
<td>Number of milliseconds before the token become invalid.</td>
</tr>
<tr>
<td>token_type</td>
<td><em>OAuth2</em> <code>token type</code>. Always wil be <code>bearer</code>.</td>
</tr>
<tr>
<td>scope</td>
<td>OAuth2 scopes granted by default <code>ROLE_AFFILIATE create:user read:email</code>. May differ from the scopes requested.</td>
</tr>
</tbody></table>
<h2 id='register-a-new-user'>Register a new user</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/user</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer YOUR IBERCHECK ACCESS TOKEN</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"surnames"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"john_doe@example.com"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mobile_phone"</span><span class="p">:</span><span class="w"> </span><span class="mi">666777888</span><span class="p">,</span><span class="w">
  </span><span class="nl">"national_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345678Z"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/user"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"authorization: Bearer YOUR IBERCHECK ACCESS TOKEN"</span> <span class="se">\</span>
 <span class="nt">-X</span> POST <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"name": "John","surnames": "Doe","email": "john_doe@example.com","mobile_phone": 666777888,"national_id": "12345678Z"}'</span>
</code></pre></div>
<p>Almost everything created in the API is related with an user in some way. So this step guides you about how to register
a new user in the API.</p>
<h3 id='request-2'>Request</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>name</td>
<td>User first name.</td>
</tr>
<tr>
<td>surnames</td>
<td>User last name, surnames or family name.</td>
</tr>
<tr>
<td>email</td>
<td>User email address.</td>
</tr>
<tr>
<td>mobile_phone</td>
<td><em>Optional</em> User mobile phone (only spanish number)</td>
</tr>
<tr>
<td>national_id</td>
<td><em>Optional</em> User Spanish ID (NIF or NIE)</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>

{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/user/1"
    },
    "sale": {
      "href": "https://api_dev.ibercheck.net/user/1/sale"
    }
  },
  "name": "John",
  "surnames": "Doe",
  "email": "john_doe@example.com",
  "mobile_phone": 666777888,
  "national_id": "12345678Z",
  "access_token": {
    "access_token": "USER ACCESS TOKEN"
  }
}
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="s1">'{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/user/1"
    },
    "sale": {
      "href": "https://api_dev.ibercheck.net/user/1/sale"
    }
  },
  "name": "John",
  "surnames": "Doe",
  "email": "john_doe@example.com",
  "mobile_phone": 666777888,
  "national_id": "12345678Z",
  "access_token": {
    "access_token": "USER ACCESS TOKEN"
  }
}'</span>
</code></pre></div><h3 id='response-2'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_links.self</td>
<td>Reference to the user created.</td>
</tr>
<tr>
<td>_links.sales</td>
<td>Link for create and read user sales.</td>
</tr>
<tr>
<td>name</td>
<td>User first name.</td>
</tr>
<tr>
<td>surnames</td>
<td>User last name, surnames or family name.</td>
</tr>
<tr>
<td>email</td>
<td>User email address.</td>
</tr>
<tr>
<td>mobile_phone</td>
<td><em>Optional</em> User mobile phone (only spanish number)</td>
</tr>
<tr>
<td>national_id</td>
<td><em>Optional</em> User Spanish ID (NIF or NIE)</td>
</tr>
<tr>
<td>access_token</td>
<td><em>OAuth2</em> attributes for use the API on behalf the user.</td>
</tr>
</tbody></table>
<h2 id='register-a-new-sale'>Register a new sale</h2>
<blockquote>
<p>URI must be the same as the link named <code>Sales</code> (_links.sales) present in the user resource.</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/user/1/sale</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer USER ACCESS TOKEN</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"orderNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABCD1234"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"product"</span><span class="p">:</span><span class="w"> </span><span class="s2">"autocheck"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABCDEFGHIJKLMNOPQRSTUWXYZ1234567890"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/user/1/sale"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"authorization: Bearer USER ACCESS TOKEN"</span> <span class="se">\</span>
 <span class="nt">-X</span> POST <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"orderNumber": "ABCD1234","product": "autocheck","hash": "ABCDEFGHIJKLMNOPQRSTUWXYZ1234567890"}'</span>
</code></pre></div>
<p>For to register a new sale we need first a <a href="#register-a-new-user">registered user</a>.</p>
<h3 id='request-3'>Request</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>orderNumber</td>
<td>Custom unique identification number.</td>
</tr>
<tr>
<td>product</td>
<td>Product mnemonic.</td>
</tr>
<tr>
<td>hash</td>
<td>Security function for sign the transaction.</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>

{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/sale/1"
    },
    "report-request": {
      "href": "https://api_dev.ibercheck.net/sale/1/report-request"
    }
  },
  "orderNumber": "ABCD1234",
  "_embedded": {
    "buyer": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/user/1"
        },
        "sale": {
          "href": "https://api_dev.ibercheck.net/user/1/sale"
        }
      },
      "name": "John",
      "surnames": "Doe",
      "email": "john_doe@example.com",
      "mobile_phone": 666777888,
      "national_id": "12345678Z",
      "access_token": {
        "access_token": "string"
      }
    },
    "product": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/product/1"
        },
      },
      "mnemonic": "autocheck"
    }
  }
}
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="s1">'{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/sale/1"
    },
    "report-request": {
      "href": "https://api_dev.ibercheck.net/sale/1/report-request"
    }
  },
  "orderNumber": "ABCD1234",
  "_embedded": {
    "buyer": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/user/1"
        },
        "sale": {
          "href": "https://api_dev.ibercheck.net/user/1/sale"
        }
      },
      "name": "John",
      "surnames": "Doe",
      "email": "john_doe@example.com",
      "mobile_phone": 666777888,
      "national_id": "12345678Z",
      "access_token": {
        "access_token": "string"
      }
    },
    "product": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/product/1"
        },
      },
      "mnemonic": "autocheck"
    }
  }
}'</span>
</code></pre></div><h3 id='response-3'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_links.self</td>
<td>Reference to the sale created.</td>
</tr>
<tr>
<td>_links.report-request</td>
<td>Link for create a new report request.</td>
</tr>
<tr>
<td>orderNumber</td>
<td>Custom order number used when the sale was created.</td>
</tr>
<tr>
<td>_embedded.buyer</td>
<td>embedded user resource proprietary of the sale.</td>
</tr>
<tr>
<td>_embedded.product</td>
<td>embedded product resource.</td>
</tr>
</tbody></table>
<h2 id='register-a-new-report-request'>Register a new report request</h2>
<blockquote>
<p>URI must be the same as the link named <code>report-request</code> (_links.report-request) present in the sale resource.</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/sale/1/report-request</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer USER ACCESS TOKEN</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"autocheck"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"purpose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocheck API tutorial example"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/sale/1/report-request"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"authorization: Bearer USER ACCESS TOKEN"</span> <span class="se">\</span>
 <span class="nt">-X</span> POST <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"type": "autocheck","purpose": "Autocheck API tutorial example"}'</span>
</code></pre></div>
<p>For to register a new report request we need first a <a href="#register-a-new-sale">sale</a>.</p>
<h3 id='request-4'>Request</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>type</td>
<td>Report type. Can be <code>autocheck</code> or <code>check_a_tercero</code>.</td>
</tr>
<tr>
<td>purpose</td>
<td>Purpose of the report.</td>
</tr>
<tr>
<td>pcd_name</td>
<td><em>Optional</em> Person consulted name. Only when report type is <code>check_a_tercero</code>.</td>
</tr>
<tr>
<td>pcd_surnames</td>
<td><em>Optional</em> Person consulted surnames. Only when report type is <code>check_a_tercero</code>.</td>
</tr>
<tr>
<td>pcd_email</td>
<td><em>Optional</em> Person consulted email address. Only when report type is <code>check_a_tercero</code>.</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>

{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/report-request/1"
    },
    "authorization ": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize"
    },
    "authorization_document": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize/document"
    }
  },
  "type": "autocheck",
  "purpose": "Autocheck API tutorial example",
  "status": "pending_authorization",
  "_embedded": {
    "person_consulting": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/user/1"
        }
      },
      "id": "1",
      "name": "John",
      "surnames": "Doe"
    },
    "person_consulted": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/user/1"
        }
      },
      "id": "1",
      "name": "John",
      "surnames": "Doe"
    }
  }
}
</code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="s1">'{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/report-request/1"
    },
    "authorization ": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize"
    },
    "authorization_document": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize/document"
    }
  },
  "type": "autocheck",
  "purpose": "Autocheck API tutorial example",
  "status": "pending_authorization",
  "_embedded": {
    "person_consulting": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/user/1"
        }
      },
      "id": "1",
      "name": "John",
      "surnames": "Doe"
    },
    "person_consulted": {
      "_links": {
        "self": {
          "href": "https://api_dev.ibercheck.net/user/1"
        }
      },
      "id": "1",
      "name": "John",
      "surnames": "Doe"
    }
  }
}'</span>
</code></pre></div><h3 id='response-4'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_links.self</td>
<td>Reference to the sale created.</td>
</tr>
<tr>
<td>_links.authorization</td>
<td>Finish authentication process.</td>
</tr>
<tr>
<td>_links.authorization_document</td>
<td>Upload person consulted authentication document files.</td>
</tr>
<tr>
<td>type</td>
<td>Report type. Can be <code>autocheck</code> or <code>check_a_tercero</code>.</td>
</tr>
<tr>
<td>purpose</td>
<td>Purpose of the report.</td>
</tr>
<tr>
<td>_embedded.person_consulting</td>
<td>embedded user resource for the user requesting the report.</td>
</tr>
<tr>
<td>_embedded.person_consulted</td>
<td>embedded user resource for the person consulted.</td>
</tr>
</tbody></table>
<h2 id='upload-a-document-to-the-report-request'>Upload a document to the report request</h2>
<blockquote>
<p>URI must be the same as the link named <code>authorization_document</code> (_links.authorization_document) present in the
 report request resource.</p>
</blockquote>
<div class="highlight"><pre class="highlight plaintext"><code>POST /report-request/1/authorize/document HTTP/1.1
User-Agent: MyClient/1.0.0
Accept: application/vnd.ibercheck.v1+json
Content-Type: multipart/form-data
Host: api_dev.ibercheck.net
Authorization: Bearer USER ACCESS TOKEN

&lt;file upload&gt;
</code></pre></div>
<p>For to upload a document we need first a <a href="#register-a-new-report-request">report request</a>.</p>
<h3 id='request-5'>Request</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>file</td>
<td>File to upload.</td>
</tr>
</tbody></table>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>

{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/report-request/1"
    },
    "authorization ": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize"
    },
    "authorization_document": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize/document"
    }
  },
  "type": "autocheck",
  "purpose": "Autocheck API tutorial example",
  "status": "pending_authorization",
  "_embedded": {
    "person_consulting": {
    },
    "person_consulted": {
    }
  }
}
</code></pre></div><h3 id='response-5'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_links.self</td>
<td>Reference to the sale created.</td>
</tr>
<tr>
<td>_links.authorization</td>
<td>Finish authentication process.</td>
</tr>
<tr>
<td>_links.authorization_document</td>
<td>Upload person consulted authentication document files.</td>
</tr>
<tr>
<td>type</td>
<td>Report type. Can be <code>autocheck</code> or <code>check_a_tercero</code>.</td>
</tr>
<tr>
<td>purpose</td>
<td>Purpose of the report.</td>
</tr>
<tr>
<td>_embedded.person_consulting</td>
<td>embedded user resource for the user requesting the report.</td>
</tr>
<tr>
<td>_embedded.person_consulted</td>
<td>embedded user resource for the person consulted.</td>
</tr>
</tbody></table>
<h2 id='complete-report-request-authentication'>Complete report request authentication</h2>
<blockquote>
<p>URI must be the same as the link named <code>authorization</code> (_links.authorization) present in the
 report request resource.</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/report-request/1/authorize</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer USER ACCESS TOKEN</span>

&lt;body is empty&gt;
</code></pre></div>
<p>For mark a report request as authenticated we need first upload <a href="#upload-a-document-to-the-report-request">user documents</a>.</p>
<h3 id='request-6'>Request</h3>
<ul>
<li>Request body is empty</li>
</ul>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">Created</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>

{
  "_links": {
    "self": {
      "href": "https://api_dev.ibercheck.net/report-request/1"
    },
    "authorization ": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize"
    },
    "authorization_document": {
      "href": "https://api_dev.ibercheck.net/report-request/1/authorize/document"
    }
  },
  "type": "autocheck",
  "purpose": "Autocheck API tutorial example",
  "status": "pending_authorization",
  "_embedded": {
    "person_consulting": {
    },
    "person_consulted": {
    }
  }
}
</code></pre></div><h3 id='response-6'>Response</h3>
<table><thead>
<tr>
<th>Attribute</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>_links.self</td>
<td>Reference to the sale created.</td>
</tr>
<tr>
<td>_links.authorization</td>
<td>Finish authentication process.</td>
</tr>
<tr>
<td>_links.authorization_document</td>
<td>Upload person consulted authentication document files.</td>
</tr>
<tr>
<td>type</td>
<td>Report type. Can be <code>autocheck</code> or <code>check_a_tercero</code>.</td>
</tr>
<tr>
<td>purpose</td>
<td>Purpose of the report.</td>
</tr>
<tr>
<td>_embedded.person_consulting</td>
<td>embedded user resource for the user requesting the report.</td>
</tr>
<tr>
<td>_embedded.person_consulted</td>
<td>embedded user resource for the person consulted.</td>
</tr>
</tbody></table>
<h1 id='webhooks'>WebHooks</h1>
<blockquote>
<p>To register a new <code>webhook</code> use this code:</p>
</blockquote>
<div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">PATCH</span> <span class="nn">/affiliate/YOUR_AFFILIATE_NAME</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">MyClient/1.0.0</span>
<span class="na">Accept</span><span class="p">:</span> <span class="s">application/vnd.ibercheck.v1+json</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">api_dev.ibercheck.net</span>
<span class="na">Authorization</span><span class="p">:</span> <span class="s">Bearer YOUR IBERCHECK ACCESS TOKEN</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"webhook_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"URL TO YOUR ENDPOINT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code>curl <span class="s2">"https://api_dev.ibercheck.net/affiliate/YOUR_AFFILIATE_NAME"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"content-type: application/json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"accept: application/vnd.ibercheck.v1+json"</span> <span class="se">\</span>
 <span class="nt">-H</span> <span class="s2">"authorization: Bearer YOUR IBERCHECK ACCESS TOKEN"</span> <span class="se">\</span>
 <span class="nt">-X</span> PATCH <span class="se">\</span>
 <span class="nt">-d</span> <span class="s1">'{"webhook_url": "URL TO YOUR ENDPOINT"}'</span>
</code></pre></div><div class="highlight"><pre class="highlight http tab-http"><code><span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/hal+json</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"YOUR_AFFILIATE_NAME"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"template"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ibercheck"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sso_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"capitalize_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"webhook_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"URL TO YOUR ENDPOINT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"webhook_format"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api_v1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/affiliate/YOUR_AFFILIATE_NAME"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"sale"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/sale"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"product"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/product"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/user"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight shell tab-shell"><code><span class="s1">'{
   "name": "YOUR_AFFILIATE_NAME",
   "template": "ibercheck",
   "sso_enabled": false,
   "capitalize_enabled": true,
   "enabled": true,
   "webhook_url": "URL TO YOUR ENDPOINT",
   "webhook_format": "api_v1"
   "_links": {
     "self": {
       "href": "https://api_dev.ibercheck.net/affiliate/YOUR_AFFILIATE_NAME"
     },
     "sale": {
       "href": "https://api_dev.ibercheck.net/sale"
     },
     "product": {
       "href": "https://api_dev.ibercheck.net/product"
     },
     "user": {
       "href": "https://api_dev.ibercheck.net/user"
     }
   }
 }'</span>
</code></pre></div>
<p>For to keep your system side up to date this API allows you to subscribe to business events through WebHooks.</p>

<p>WebHooks are composed with the following properties.</p>

<ul>
<li>Header <code>X-Ibercheck-Event</code> contains the event name.</li>
<li>Header <code>X-Ibercheck-Signature</code> contains the HMAC-256 hex digest of the body using the &quot;affiliate secret&quot; as key.</li>
<li>Body contains the event payload. Usually match with any of the API GET responses.</li>
</ul>

<p>The following is a list of events implemented (Signatures has been created with the key <code>s3cr3t</code>):</p>
<h2 id='report-request-status-changed-event'>Report request status changed event</h2><div class="highlight"><pre class="highlight http tab-http"><code><span class="nf">POST</span> <span class="nn">/path/to/your/endpoint</span> <span class="k">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">User-Agent</span><span class="p">:</span> <span class="s">Ibercheck Webhook</span>
<span class="na">Content-Type</span><span class="p">:</span> <span class="s">application/json</span>
<span class="na">Host</span><span class="p">:</span> <span class="s">your.domain</span>
<span class="na">X-Ibercheck-Event</span><span class="p">:</span> <span class="s">report-request_status_changed</span>
<span class="na">X-Ibercheck-Signature</span><span class="p">:</span> <span class="s">a67bfec357d1429e7e0616bad8b5dd06b16165c1a9f268518dfbb401d3b508c3</span>

<span class="p">{</span><span class="w">
  </span><span class="nl">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/report-request/1"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"authorization"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/report-request/1/authorize"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"authorization_document"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/report-request/1/authorize/document"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"autocheck"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"purpose"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Autocheck API tutorial example"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending_authorization"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"_embedded"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"person_consulting"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/user/1"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"surnames"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"person_consulted"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"_links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"self"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"href"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://api_dev.ibercheck.net/user/1"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"surnames"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>Name: <code>report-request_status_changed</code></p>

<p>Description: This event is triggered when the <code>report-request</code> change his status.</p>

<p>Payload: Same content as the response of <code>/report-request/&lt;id&gt;</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="http">http</a>
                <a href="#" data-language-name="shell">shell</a>
          </div>
      </div>
    </div>
  </body>
</html>
